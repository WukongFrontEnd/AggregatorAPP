/*++----------------------------------------------------------------------------------------------------------------------------------------------------------------------
1. 项目名称：AggregatorAPP (一个典型的Aggregator应用系统)
2. 文件名：src -> application -> controllers ->mail -> processer.js
3. 作者：zhaohuagang@lifang.com
4. 备注：邮件发送范例controller
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------++*/

/*++-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
加载配置及工具
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------++*/
import mail from "../../../system/libraries/mail" ;
import AppApiControllerBasic from "../api" ;
/*++-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
创建一个渲染器实例
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------++*/
class Processer extends AppApiControllerBasic {
    constructor(req, res, next) {
        super(req, res, next) ;
        this.process() ;
    }
    /*++-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
    邮件发送
    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------++*/
    process() {
        mail.send({
            "to" : "42547335@qq.com" ,
            "subject" : "你还好吗？" ,
            "content" : "这么多天没有联系，不知道你还好不好！" ,
            "success" : (msg) => {
                this.jsonObject.message = msg ;
                this.output() ;
            } ,
            "failed" : (error) => {
                this.jsonObject.message = error ;
                this.jsonObject.status = 0 ;
                this.output() ;
            }
        }) ;
    }
}
/*++-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
最后将render暴露出去
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------++*/
export default Processer ;