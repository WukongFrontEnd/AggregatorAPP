/*++----------------------------------------------------------------------------------------------------------------------------------------------------------------------
1. 项目名称：AggregatorAPP (一个典型的Aggregator应用系统)
2. 文件名：src -> system -> core -> bootstrap ->loadConfigs.js
3. 作者：zhaohuagang@lifang.com
4. 备注：系统启动项 -> 加载所有的应用配置，把他们放到app.locals.confs下
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------++*/

/*++-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
加载相关资源
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------++*/
import loader from "../../libraries/loader" ;
/*++-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
读取配置目录
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------++*/
let applicationConfs = loader.load("application/configs") ;
/*++-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
模块输出为一个方法，在app.js中执行，把以express创建的应用app当做参数
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------++*/
export default function(app){
    let confs = {} ;
    for(let m in applicationConfs) {
        confs[m] = applicationConfs[m]["default"] ;
    }
    app.locals.confs = confs ;    
} ;